---
app-id: org.flatpak.artisan
runtime: org.kde.Platform
runtime-version: '5.11'
sdk: org.kde.Sdk
command: run-Artisan.sh
finish-args:
  - --share=ipc
  - --socket=x11
  - --socket=wayland
  - --filesystem=host
  - --device=all
  - --share=network

modules:
- name: app-install
  buildsystem: simple
  build-commands:
  - cp -r bin  /app/

  cleanup:
    - "/bin/requirements*"
    - "/bin/setup*"
    - "/bin/build*"
    - "/bin/create*"
    - "/bin/*.spec"
    - "/bin/debian"
    - "/bin/raspbian"
  sources:
  - type: dir
    path: ../src/
    dest: bin


- name: cpython
  sources:
  - type: archive
    url: https://www.python.org/ftp/python/3.8.6/Python-3.8.6.tar.xz
    sha256: a9e0b79d27aa056eb9cce8d63a427b5f9bab1465dee3f942dcfdb25a82f4ab8a

- name: pip-install
  buildsystem: simple
  build-options:
    build-args:
    - "--share=network"
  build-commands:
  - pip3 install --upgrade pip
  - pip3 install -r requirements-linux.txt
  - pip3 install -r requirements.txt
  sources:
  - type: file
    path: requirements-linux.txt
  - type: file
    path: requirements.txt

- name: run-Artisan
  buildsystem: simple
  build-commands:
  - install -D run-Artisan.sh /app/bin/run-Artisan.sh
  sources:
  - type: file
    path: run-Artisan.sh
